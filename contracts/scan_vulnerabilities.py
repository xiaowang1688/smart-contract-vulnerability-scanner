import subprocess
import os

def scan_contract(contract_path):
    try:
        result = subprocess.run(['myth', 'analyze', contract_path], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        print(result.stdout.decode('utf-8'))
        if result.stderr:
            print(f"Error: {result.stderr.decode('utf-8')}")
    except Exception as e:
        print(f"An error occurred: {e}")

if __name__ == "__main__":
    contract_dir = '../contracts'
    for filename in os.listdir(contract_dir):
        if filename.endswith(".sol"):
            contract_path = os.path.join(contract_dir, filename)
            print(f"Scanning {contract_path} for vulnerabilities...")
            scan_contract(contract_path)
